import{j as e,m as s,p as a,a2 as t,n as i,E as l,D as n,u as r,M as o,c,X as m,a3 as d,l as x}from"./ui-BChFafQN.js";import{r as u}from"./vendor-fM8kc8IR.js";import{u as h}from"./useQuery-BWIQYHUH.js";import{L as p}from"./Layout-bXpNv8LP.js";import{L as g}from"./index-CVZ54knL.js";import{C as j}from"./Card-BeU1eMaR.js";import{g as y}from"./api-Cz4wYYaF.js";import"./constants-A1-OgdCM.js";import"./helpers-7IRBxzvX.js";const v=()=>{var v,f;const[b,N]=u.useState(null),[w,T]=u.useState(0),[C,D]=u.useState(!1),[k,I]=u.useState("documents"),{data:F,isLoading:L}=h({queryKey:["all-documents-public"],queryFn:async()=>{var e;const s=await y(),a=((null==(e=null==s?void 0:s.data)?void 0:e.folders)||[]).filter(e=>e.name.toUpperCase().startsWith("DOCUMENTO"));return await Promise.all(a.map(async e=>{var s;const a=await y(e.id),t=((null==(s=null==a?void 0:a.data)?void 0:s.files)||[]).filter(e=>{var s,a,t;return"application/pdf"===e.mimeType||(null==(s=e.mimeType)?void 0:s.includes("document"))||(null==(a=e.mimeType)?void 0:a.includes("spreadsheet"))||(null==(t=e.mimeType)?void 0:t.includes("presentation"))}).map(e=>({id:e.id,name:e.name,url:e.url,downloadUrl:e.downloadUrl,mimeType:e.mimeType}));return{id:e.id,name:e.name,documents:t}}))},staleTime:3e5}),{data:P,isLoading:S}=h({queryKey:["gallery-albums-public"],queryFn:async()=>{var e,s,a;const t=await y(),i=((null==(e=null==t?void 0:t.data)?void 0:e.folders)||[]).find(e=>{const s=e.name.toUpperCase().trim();return"GALERIA"===s||"GALLERY"===s});if(!i)return{albums:[],looseImages:[]};const l=await y(i.id),n=(null==(s=null==l?void 0:l.data)?void 0:s.folders)||[],r=(null==(a=null==l?void 0:l.data)?void 0:a.files)||[];return{albums:await Promise.all(n.map(async e=>{var s,a;const t=await y(e.id),i=((null==(s=null==t?void 0:t.data)?void 0:s.files)||[]).filter(e=>{var s;return null==(s=e.mimeType)?void 0:s.startsWith("image/")}).map(e=>({id:e.id,name:e.name,url:e.url,thumbnail:e.thumbnail||e.url})),l=e.name.match(/(\d{4}-\d{2}-\d{2})/),n=l?l[1]:(new Date).toISOString().split("T")[0],r=e.name.split(" - "),o=r.length>2?r[2]:void 0,c=r.length>1?r[1]:e.name;return{id:e.id,name:c||e.name,date:n,location:o,coverImage:(null==(a=i[0])?void 0:a.thumbnail)||"/placeholder-album.jpg",images:i}})),looseImages:r.filter(e=>{var s;return null==(s=e.mimeType)?void 0:s.startsWith("image/")}).map(e=>({id:e.id,name:e.name,url:e.url,thumbnail:e.thumbnail||e.url}))}},staleTime:3e5}),E=F||[],z=(null==P?void 0:P.albums)||[];(null==P?void 0:P.looseImages)&&P.looseImages.length>0&&z.unshift({id:"general",name:"Fotos Generales",date:(new Date).toISOString().split("T")[0],coverImage:(null==(v=P.looseImages[0])?void 0:v.thumbnail)||"/placeholder-album.jpg",images:P.looseImages});const U=e=>e.replace(/\.[^/.]+$/,"").replace(/_/g," "),G=()=>{D(!1)};return e.jsxs(p,{title:"Galería y Documentos",description:"Galería de fotos y documentos oficiales de la campaña de Dra. Mirella Camapaza",children:[e.jsx("section",{className:"pt-28 pb-16 gradient-hero text-white",children:e.jsx("div",{className:"container-custom",children:e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-3xl mx-auto",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Galería y Documentos"}),e.jsx("p",{className:"text-xl text-white/90",children:"Fotos de la campaña y documentos oficiales del partido"})]})})}),e.jsx("section",{className:"py-16 bg-secondary-50",children:e.jsxs("div",{className:"container-custom",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"inline-flex bg-white rounded-lg p-1 shadow-md",children:[e.jsxs("button",{onClick:()=>I("documents"),className:"flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all "+("documents"===k?"bg-primary-600 text-white":"text-secondary-600 hover:bg-secondary-100"),children:[e.jsx(a,{className:"w-5 h-5"}),"Documentos"]}),e.jsxs("button",{onClick:()=>I("photos"),className:"flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all "+("photos"===k?"bg-primary-600 text-white":"text-secondary-600 hover:bg-secondary-100"),children:[e.jsx(t,{className:"w-5 h-5"}),"Fotos"]})]})}),"documents"===k&&e.jsx(e.Fragment,{children:L?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(g,{size:"lg",text:"Cargando documentos..."})}):0===E.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(a,{className:"w-16 h-16 mx-auto text-secondary-300 mb-4"}),e.jsx("p",{className:"text-secondary-500 text-lg",children:"No hay documentos disponibles"})]}):e.jsx("div",{className:"space-y-10",children:E.map((t,r)=>e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*r},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-3 border-b-2 border-primary-200",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(i,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-secondary-900",children:t.name}),e.jsxs("p",{className:"text-sm text-secondary-500",children:[t.documents.length," ",1===t.documents.length?"documento":"documentos"]})]})]}),t.documents.length>0?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.documents.map((t,i)=>{var r,o,c;return e.jsx(s.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.05*i},children:e.jsxs(j,{className:"hover:shadow-lg transition-shadow h-full",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[(c=t.mimeType,"application/pdf"===c?e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(a,{className:"w-6 h-6 text-red-600"})}):(null==c?void 0:c.includes("spreadsheet"))?e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(a,{className:"w-6 h-6 text-green-600"})}):(null==c?void 0:c.includes("presentation"))?e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(a,{className:"w-6 h-6 text-orange-600"})}):e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(a,{className:"w-6 h-6 text-blue-600"})})),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-secondary-900 truncate",title:U(t.name),children:U(t.name)}),e.jsx("p",{className:"text-sm text-secondary-500 mt-1",children:"application/pdf"===t.mimeType?"Documento PDF":(null==(r=t.mimeType)?void 0:r.includes("spreadsheet"))?"Hoja de cálculo":(null==(o=t.mimeType)?void 0:o.includes("presentation"))?"Presentación":"Documento"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t",children:[e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",children:[e.jsx(l,{className:"w-4 h-4"}),"Ver"]}),t.downloadUrl&&e.jsxs("a",{href:t.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium text-secondary-600 hover:bg-secondary-50 rounded-lg transition-colors",children:[e.jsx(n,{className:"w-4 h-4"}),"Descargar"]})]})]})},t.id)})}):e.jsx("p",{className:"text-secondary-500 text-sm italic py-4",children:"Esta carpeta no contiene documentos"})]},t.id))})}),"photos"===k&&e.jsx(e.Fragment,{children:S?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(g,{size:"lg",text:"Cargando galería..."})}):0===z.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(t,{className:"w-16 h-16 mx-auto text-secondary-300 mb-4"}),e.jsx("p",{className:"text-secondary-500 text-lg",children:"Próximamente compartiremos fotos de la campaña"})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:z.map((a,i)=>{return e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*i},children:e.jsxs(j,{className:"overflow-hidden cursor-pointer group hover:shadow-xl transition-all",padding:"none",onClick:()=>a.images.length>0&&((e,s)=>{N(e),T(s),D(!0)})(a,0),children:[e.jsxs("div",{className:"relative h-48 bg-secondary-200 overflow-hidden",children:[a.images.length>0?e.jsx("img",{src:(n=a.images[0],n?n.id?`https://lh3.googleusercontent.com/d/${n.id}=w800`:n.thumbnail||n.url:"/placeholder-album.jpg"),alt:a.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:e=>{const s=e.target,t=a.images[0],i=s.src;t.id&&!i.includes("uc?export")?s.src=`https://drive.google.com/uc?export=view&id=${t.id}`:t.thumbnail&&i!==t.thumbnail&&(s.src=t.thumbnail)}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary-100 to-primary-200",children:e.jsx(t,{className:"w-16 h-16 text-primary-400"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4 text-white",children:[e.jsx("h3",{className:"font-bold text-lg truncate",children:a.name}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/80 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(r,{className:"w-4 h-4"}),(l=a.date,new Date(l).toLocaleDateString("es-PE",{year:"numeric",month:"long",day:"numeric"}))]}),a.location&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(o,{className:"w-4 h-4"}),a.location]})]})]})]}),e.jsx("div",{className:"p-4",children:e.jsxs("p",{className:"text-secondary-600 text-sm",children:[a.images.length," ",1===a.images.length?"foto":"fotos"]})})]})},a.id);var l,n})})})]})}),e.jsx(c,{children:C&&b&&b.images.length>0&&e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center",onClick:G,children:[e.jsx("button",{onClick:G,className:"absolute top-4 right-4 p-2 text-white/80 hover:text-white transition-colors z-10",children:e.jsx(m,{className:"w-8 h-8"})}),b.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),b&&T(e=>e>0?e-1:b.images.length-1)},className:"absolute left-4 p-2 text-white/80 hover:text-white transition-colors z-10",children:e.jsx(d,{className:"w-10 h-10"})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),b&&T(e=>e<b.images.length-1?e+1:0)},className:"absolute right-4 p-2 text-white/80 hover:text-white transition-colors z-10",children:e.jsx(x,{className:"w-10 h-10"})})]}),e.jsx(s.img,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},src:($=b.images[w],$.id?`https://lh3.googleusercontent.com/d/${$.id}`:$.thumbnail||$.url),alt:null==(f=b.images[w])?void 0:f.name,className:"max-h-[90vh] max-w-[90vw] object-contain",onClick:e=>e.stopPropagation(),onError:e=>{const s=e.target,a=b.images[w],t=s.src;a.id&&!t.includes("uc?export")?s.src=`https://drive.google.com/uc?export=view&id=${a.id}`:a.thumbnail&&t!==a.thumbnail&&(s.src=a.thumbnail)}},w),e.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-center text-white",children:[e.jsx("p",{className:"font-medium",children:b.name}),e.jsxs("p",{className:"text-sm text-white/70",children:[w+1," / ",b.images.length]})]})]})})]});var $};export{v as default};
