import{j as e,aL as s,m as r,U as a,aM as o,i as t,a9 as i,a0 as n,aH as l,au as c,ac as d,l as m,M as x,a1 as v,aN as j,x as p,aO as u,ad as A,ap as N,E as y,c as h,X as b,L as f,b as g}from"./ui-BChFafQN.js";import{r as O}from"./vendor-fM8kc8IR.js";import{B as C}from"./index-CVZ54knL.js";import{D as U}from"./DashboardLayout-C2CvQ_Yq.js";import{C as I}from"./Card-BeU1eMaR.js";import{B as L}from"./Badge-CFDGoBCM.js";import{N as P,O as w,P as S,Q as R,R as E}from"./api-Cz4wYYaF.js";import{M,T,C as H,P as D,u as G}from"./maps-DbECud_u.js";import"./constants-A1-OgdCM.js";const Y=[{provincia:"AZANGARO",distrito:"ACHAYA",electores:3413,varones:1758,mujeres:1655,jovenes:1032,mayores70:263},{provincia:"AZANGARO",distrito:"ARAPA",electores:6576,varones:3252,mujeres:3324,jovenes:2049,mayores70:853},{provincia:"AZANGARO",distrito:"ASILLO",electores:12497,varones:5833,mujeres:6664,jovenes:4332,mayores70:1245},{provincia:"AZANGARO",distrito:"AZANGARO",electores:24951,varones:12432,mujeres:12519,jovenes:8998,mayores70:1923},{provincia:"AZANGARO",distrito:"CAMINACA",electores:3909,varones:1928,mujeres:1981,jovenes:1084,mayores70:382},{provincia:"AZANGARO",distrito:"CHUPA",electores:6275,varones:3057,mujeres:3218,jovenes:1731,mayores70:1054},{provincia:"AZANGARO",distrito:"JOSE DOMINGO CHOQUEHUANCA",electores:3594,varones:1747,mujeres:1847,jovenes:1083,mayores70:371},{provincia:"AZANGARO",distrito:"MUÑANI",electores:5068,varones:2456,mujeres:2612,jovenes:1962,mayores70:455},{provincia:"AZANGARO",distrito:"POTONI",electores:2864,varones:1326,mujeres:1538,jovenes:1130,mayores70:193},{provincia:"AZANGARO",distrito:"SAMAN",electores:10161,varones:5068,mujeres:5093,jovenes:3116,mayores70:1080},{provincia:"AZANGARO",distrito:"SAN ANTON",electores:5939,varones:2789,mujeres:3150,jovenes:2077,mayores70:568},{provincia:"AZANGARO",distrito:"SAN JOSE",electores:4109,varones:1961,mujeres:2148,jovenes:1452,mayores70:465},{provincia:"AZANGARO",distrito:"SAN JUAN DE SALINAS",electores:3066,varones:1400,mujeres:1666,jovenes:956,mayores70:333},{provincia:"AZANGARO",distrito:"SANTIAGO DE PUPUJA",electores:4151,varones:1971,mujeres:2180,jovenes:1078,mayores70:616},{provincia:"AZANGARO",distrito:"TIRAPATA",electores:2287,varones:1086,mujeres:1201,jovenes:803,mayores70:255},{provincia:"CARABAYA",distrito:"AJOYANI",electores:1891,varones:966,mujeres:925,jovenes:640,mayores70:115},{provincia:"CARABAYA",distrito:"AYAPATA",electores:4545,varones:2268,mujeres:2277,jovenes:1681,mayores70:379},{provincia:"CARABAYA",distrito:"COASA",electores:4762,varones:2417,mujeres:2345,jovenes:1784,mayores70:375},{provincia:"CARABAYA",distrito:"CORANI",electores:3128,varones:1585,mujeres:1543,jovenes:1292,mayores70:183},{provincia:"CARABAYA",distrito:"CRUCERO",electores:6081,varones:2940,mujeres:3141,jovenes:2325,mayores70:467},{provincia:"CARABAYA",distrito:"ITUATA",electores:4137,varones:2151,mujeres:1986,jovenes:1575,mayores70:299},{provincia:"CARABAYA",distrito:"MACUSANI",electores:9306,varones:4614,mujeres:4692,jovenes:3766,mayores70:508},{provincia:"CARABAYA",distrito:"OLLACHEA",electores:4100,varones:2101,mujeres:1999,jovenes:1534,mayores70:276},{provincia:"CARABAYA",distrito:"SAN GABAN",electores:5039,varones:3235,mujeres:1804,jovenes:1530,mayores70:151},{provincia:"CARABAYA",distrito:"USICAYOS",electores:2457,varones:1217,mujeres:1240,jovenes:927,mayores70:212},{provincia:"CHUCUITO",distrito:"DESAGUADERO",electores:8474,varones:4167,mujeres:4307,jovenes:2585,mayores70:647},{provincia:"CHUCUITO",distrito:"HUACULLANI",electores:3634,varones:1830,mujeres:1804,jovenes:994,mayores70:490},{provincia:"CHUCUITO",distrito:"JULI",electores:17534,varones:8512,mujeres:9022,jovenes:5154,mayores70:2265},{provincia:"CHUCUITO",distrito:"KELLUYO",electores:3965,varones:2008,mujeres:1957,jovenes:1133,mayores70:456},{provincia:"CHUCUITO",distrito:"PISACOMA",electores:2055,varones:988,mujeres:1067,jovenes:494,mayores70:318},{provincia:"CHUCUITO",distrito:"POMATA",electores:11903,varones:5862,mujeres:6041,jovenes:3193,mayores70:1950},{provincia:"CHUCUITO",distrito:"ZEPITA",electores:12754,varones:6342,mujeres:6412,jovenes:3997,mayores70:1780},{provincia:"EL COLLAO",distrito:"CAPASO",electores:645,varones:301,mujeres:344,jovenes:139,mayores70:102},{provincia:"EL COLLAO",distrito:"CONDURIRI",electores:2342,varones:1160,mujeres:1182,jovenes:643,mayores70:277},{provincia:"EL COLLAO",distrito:"ILAVE",electores:38227,varones:18783,mujeres:19444,jovenes:12234,mayores70:4190},{provincia:"EL COLLAO",distrito:"PILCUYO",electores:9327,varones:4476,mujeres:4851,jovenes:1801,mayores70:2092},{provincia:"EL COLLAO",distrito:"SANTA ROSA",electores:2855,varones:1368,mujeres:1487,jovenes:680,mayores70:418},{provincia:"HUANCANE",distrito:"COJATA",electores:3758,varones:1907,mujeres:1851,jovenes:1246,mayores70:271},{provincia:"HUANCANE",distrito:"HUANCANE",electores:17720,varones:8695,mujeres:9025,jovenes:4753,mayores70:2738},{provincia:"HUANCANE",distrito:"HUATASANI",electores:2222,varones:1111,mujeres:1111,jovenes:610,mayores70:277},{provincia:"HUANCANE",distrito:"INCHUPALLA",electores:2796,varones:1430,mujeres:1366,jovenes:757,mayores70:327},{provincia:"HUANCANE",distrito:"PUSI",electores:4345,varones:2081,mujeres:2264,jovenes:1087,mayores70:556},{provincia:"HUANCANE",distrito:"ROSASPATA",electores:4695,varones:2343,mujeres:2352,jovenes:1246,mayores70:769},{provincia:"HUANCANE",distrito:"TARACO",electores:11549,varones:5632,mujeres:5917,jovenes:3332,mayores70:1536},{provincia:"HUANCANE",distrito:"VILQUE CHICO",electores:8457,varones:4147,mujeres:4310,jovenes:1852,mayores70:1615},{provincia:"LAMPA",distrito:"CABANILLA",electores:4828,varones:2291,mujeres:2537,jovenes:1361,mayores70:478},{provincia:"LAMPA",distrito:"CALAPUJA",electores:1793,varones:851,mujeres:942,jovenes:446,mayores70:187},{provincia:"LAMPA",distrito:"LAMPA",electores:10076,varones:4882,mujeres:5194,jovenes:2824,mayores70:1051},{provincia:"LAMPA",distrito:"NICASIO",electores:2559,varones:1225,mujeres:1334,jovenes:748,mayores70:254},{provincia:"LAMPA",distrito:"OCUVIRI",electores:1931,varones:1e3,mujeres:931,jovenes:673,mayores70:128},{provincia:"LAMPA",distrito:"PALCA",electores:1598,varones:784,mujeres:814,jovenes:455,mayores70:139},{provincia:"LAMPA",distrito:"PARATIA",electores:1949,varones:951,mujeres:998,jovenes:672,mayores70:171},{provincia:"LAMPA",distrito:"PUCARA",electores:4864,varones:2331,mujeres:2533,jovenes:1376,mayores70:635},{provincia:"LAMPA",distrito:"SANTA LUCIA",electores:5653,varones:2766,mujeres:2887,jovenes:1792,mayores70:481},{provincia:"LAMPA",distrito:"VILAVILA",electores:900,varones:455,mujeres:445,jovenes:284,mayores70:67},{provincia:"MELGAR",distrito:"ANTAUTA",electores:4462,varones:2254,mujeres:2208,jovenes:1455,mayores70:311},{provincia:"MELGAR",distrito:"AYAVIRI",electores:19869,varones:9686,mujeres:10183,jovenes:6806,mayores70:1537},{provincia:"MELGAR",distrito:"CUPI",electores:1548,varones:715,mujeres:833,jovenes:467,mayores70:154},{provincia:"MELGAR",distrito:"LLALLI",electores:2324,varones:1051,mujeres:1273,jovenes:818,mayores70:243},{provincia:"MELGAR",distrito:"MACARI",electores:5553,varones:2678,mujeres:2875,jovenes:1958,mayores70:529},{provincia:"MELGAR",distrito:"NUÑOA",electores:7129,varones:3446,mujeres:3683,jovenes:2443,mayores70:757},{provincia:"MELGAR",distrito:"ORURILLO",electores:6520,varones:3019,mujeres:3501,jovenes:2141,mayores70:808},{provincia:"MELGAR",distrito:"SANTA ROSA",electores:4733,varones:2275,mujeres:2458,jovenes:1514,mayores70:460},{provincia:"MELGAR",distrito:"UMACHIRI",electores:2921,varones:1371,mujeres:1550,jovenes:782,mayores70:274},{provincia:"MOHO",distrito:"CONIMA",electores:3146,varones:1504,mujeres:1642,jovenes:683,mayores70:590},{provincia:"MOHO",distrito:"HUAYRAPATA",electores:2962,varones:1489,mujeres:1473,jovenes:946,mayores70:305},{provincia:"MOHO",distrito:"MOHO",electores:12925,varones:6255,mujeres:6670,jovenes:3333,mayores70:2197},{provincia:"MOHO",distrito:"TILALI",electores:2591,varones:1239,mujeres:1352,jovenes:611,mayores70:427},{provincia:"PUNO",distrito:"ACORA",electores:18824,varones:9488,mujeres:9336,jovenes:4672,mayores70:3122},{provincia:"PUNO",distrito:"AMANTANI",electores:4087,varones:1968,mujeres:2119,jovenes:1104,mayores70:473},{provincia:"PUNO",distrito:"ATUNCOLLA",electores:4040,varones:2e3,mujeres:2040,jovenes:1311,mayores70:348},{provincia:"PUNO",distrito:"CAPACHICA",electores:8219,varones:3981,mujeres:4238,jovenes:1883,mayores70:1568},{provincia:"PUNO",distrito:"CHUCUITO",electores:6801,varones:3197,mujeres:3604,jovenes:1582,mayores70:1167},{provincia:"PUNO",distrito:"COATA",electores:6105,varones:2868,mujeres:3237,jovenes:2011,mayores70:559},{provincia:"PUNO",distrito:"HUATA",electores:2752,varones:1344,mujeres:1408,jovenes:761,mayores70:358},{provincia:"PUNO",distrito:"MAÑAZO",electores:4288,varones:2046,mujeres:2242,jovenes:1356,mayores70:444},{provincia:"PUNO",distrito:"PAUCARCOLLA",electores:4112,varones:2021,mujeres:2091,jovenes:1089,mayores70:570},{provincia:"PUNO",distrito:"PICHACANI",electores:5171,varones:2446,mujeres:2725,jovenes:1328,mayores70:685},{provincia:"PUNO",distrito:"PLATERIA",electores:6199,varones:3098,mujeres:3101,jovenes:1475,mayores70:1118},{provincia:"PUNO",distrito:"PUNO",electores:105137,varones:52368,mujeres:52769,jovenes:31799,mayores70:7467},{provincia:"PUNO",distrito:"SAN ANTONIO",electores:1135,varones:562,mujeres:573,jovenes:392,mayores70:112},{provincia:"PUNO",distrito:"TIQUILLACA",electores:2282,varones:1084,mujeres:1198,jovenes:448,mayores70:363},{provincia:"PUNO",distrito:"VILQUE",electores:2460,varones:1203,mujeres:1257,jovenes:740,mayores70:217},{provincia:"SAN ANTONIO DE PUTINA",distrito:"ANANEA",electores:3648,varones:1828,mujeres:1820,jovenes:1178,mayores70:133},{provincia:"SAN ANTONIO DE PUTINA",distrito:"PEDRO VILCA APAZA",electores:1718,varones:845,mujeres:873,jovenes:549,mayores70:225},{provincia:"SAN ANTONIO DE PUTINA",distrito:"PUTINA",electores:12235,varones:5892,mujeres:6343,jovenes:4162,mayores70:970},{provincia:"SAN ANTONIO DE PUTINA",distrito:"QUILCAPUNCU",electores:4050,varones:2051,mujeres:1999,jovenes:1458,mayores70:338},{provincia:"SAN ANTONIO DE PUTINA",distrito:"SINA",electores:1282,varones:655,mujeres:627,jovenes:464,mayores70:96},{provincia:"SAN ROMAN",distrito:"CABANA",electores:4040,varones:1825,mujeres:2215,jovenes:1069,mayores70:485},{provincia:"SAN ROMAN",distrito:"CABANILLAS",electores:3897,varones:1845,mujeres:2052,jovenes:1155,mayores70:434},{provincia:"SAN ROMAN",distrito:"CARACOTO",electores:8176,varones:3804,mujeres:4372,jovenes:2125,mayores70:845},{provincia:"SAN ROMAN",distrito:"JULIACA",electores:181824,varones:91906,mujeres:89918,jovenes:64671,mayores70:8058},{provincia:"SAN ROMAN",distrito:"SAN MIGUEL",electores:20173,varones:8607,mujeres:11566,jovenes:5965,mayores70:823},{provincia:"SANDIA",distrito:"ALTO INAMBARI",electores:4577,varones:2565,mujeres:2012,jovenes:1564,mayores70:291},{provincia:"SANDIA",distrito:"CUYOCUYO",electores:5075,varones:2638,mujeres:2437,jovenes:1478,mayores70:463},{provincia:"SANDIA",distrito:"LIMBANI",electores:2296,varones:1218,mujeres:1078,jovenes:680,mayores70:170},{provincia:"SANDIA",distrito:"PATAMBUCO",electores:3788,varones:1931,mujeres:1857,jovenes:1460,mayores70:305},{provincia:"SANDIA",distrito:"PHARA",electores:3835,varones:2054,mujeres:1781,jovenes:1161,mayores70:278},{provincia:"SANDIA",distrito:"QUIACA",electores:1809,varones:956,mujeres:853,jovenes:632,mayores70:108},{provincia:"SANDIA",distrito:"SAN JUAN DEL ORO",electores:3399,varones:1861,mujeres:1538,jovenes:911,mayores70:335},{provincia:"SANDIA",distrito:"SAN PEDRO DE PUTINA PUNCO",electores:6267,varones:3671,mujeres:2596,jovenes:2040,mayores70:305},{provincia:"SANDIA",distrito:"SANDIA",electores:9516,varones:5055,mujeres:4461,jovenes:3205,mayores70:874},{provincia:"SANDIA",distrito:"YANAHUAYA",electores:1708,varones:975,mujeres:733,jovenes:503,mayores70:127},{provincia:"YUNGUYO",distrito:"ANAPIA",electores:980,varones:488,mujeres:492,jovenes:221,mayores70:166},{provincia:"YUNGUYO",distrito:"COPANI",electores:4116,varones:2068,mujeres:2048,jovenes:1234,mayores70:565},{provincia:"YUNGUYO",distrito:"CUTURAPI",electores:995,varones:476,mujeres:519,jovenes:238,mayores70:182},{provincia:"YUNGUYO",distrito:"OLLARAYA",electores:2006,varones:934,mujeres:1072,jovenes:345,mayores70:526},{provincia:"YUNGUYO",distrito:"TINICACHI",electores:596,varones:279,mujeres:317,jovenes:119,mayores70:87},{provincia:"YUNGUYO",distrito:"UNICACHI",electores:1019,varones:484,mujeres:535,jovenes:158,mayores70:271},{provincia:"YUNGUYO",distrito:"YUNGUYO",electores:20982,varones:10226,mujeres:10756,jovenes:5823,mayores70:2828}],B={PUNO:{lat:-15.8402,lng:-70.0219},"SAN ROMAN":{lat:-15.5,lng:-70.1333},AZANGARO:{lat:-14.91,lng:-70.19},MELGAR:{lat:-14.9167,lng:-70.5933},LAMPA:{lat:-15.3644,lng:-70.3678},HUANCANE:{lat:-15.2044,lng:-69.7633},MOHO:{lat:-15.3589,lng:-69.4967},"SAN ANTONIO DE PUTINA":{lat:-14.9333,lng:-69.8667},SANDIA:{lat:-14.3278,lng:-69.435},CARABAYA:{lat:-14.0633,lng:-70.3633},CHUCUITO:{lat:-16.2167,lng:-69.45},"EL COLLAO":{lat:-16.0833,lng:-69.6333},YUNGUYO:{lat:-16.2472,lng:-69.0928}},k={electores:922016,varones:456030,mujeres:465986,jovenes:288974,mayores70:87137,provincias:13,distritos:110};const Z=({center:e,zoom:s})=>{const r=G();return O.useEffect(()=>{r.setView(e,s)},[e,s,r]),null},V=({isOpen:s,onClose:a,onSubmit:o,initialData:t,provincia:i,distrito:n,isLoading:l})=>{const[c,d]=O.useState({provincia:i,distrito:n,tipoBase:(null==t?void 0:t.TipoBase)||"Punto_Contacto",responsable:(null==t?void 0:t.Responsable)||"",telefono:(null==t?void 0:t.Telefono)||"",estado:(null==t?void 0:t.Estado)||"Pendiente",afiliados:(null==t?void 0:t.Afiliados)||0,voluntarios:(null==t?void 0:t.Voluntarios)||0,competencia:(null==t?void 0:t.Competencia)||"",notasCompetencia:(null==t?void 0:t.NotasCompetencia)||"",prioridad:(null==t?void 0:t.Prioridad)||"Media",notas:(null==t?void 0:t.Notas)||""});O.useEffect(()=>{d({provincia:i,distrito:n,tipoBase:(null==t?void 0:t.TipoBase)||"Punto_Contacto",responsable:(null==t?void 0:t.Responsable)||"",telefono:(null==t?void 0:t.Telefono)||"",estado:(null==t?void 0:t.Estado)||"Pendiente",afiliados:(null==t?void 0:t.Afiliados)||0,voluntarios:(null==t?void 0:t.Voluntarios)||0,competencia:(null==t?void 0:t.Competencia)||"",notasCompetencia:(null==t?void 0:t.NotasCompetencia)||"",prioridad:(null==t?void 0:t.Prioridad)||"Media",notas:(null==t?void 0:t.Notas)||""})},[i,n,t]);return s?e.jsx(h,{children:e.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center p-4",children:e.jsxs(r.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-secondary-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-secondary-900",children:t?"Editar Base":"Registrar Base Territorial"}),e.jsxs("p",{className:"text-sm text-secondary-600",children:[n,", ",i]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-secondary-100 rounded-lg",children:e.jsx(b,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),await o(c)},className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Tipo de Base"}),e.jsxs("select",{value:c.tipoBase,onChange:e=>d({...c,tipoBase:e.target.value}),className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"Sede",children:"Sede Principal"}),e.jsx("option",{value:"Punto_Contacto",children:"Punto de Contacto"}),e.jsx("option",{value:"Comunidad",children:"Comunidad"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Responsable *"}),e.jsx("input",{type:"text",required:!0,value:c.responsable,onChange:e=>d({...c,responsable:e.target.value}),placeholder:"Nombre del coordinador",className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Telefono *"}),e.jsx("input",{type:"tel",required:!0,value:c.telefono,onChange:e=>d({...c,telefono:e.target.value}),placeholder:"987654321",className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Estado"}),e.jsxs("select",{value:c.estado,onChange:e=>d({...c,estado:e.target.value}),className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"Activa",children:"Activa"}),e.jsx("option",{value:"En_Formacion",children:"En Formacion"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"Inactiva",children:"Inactiva"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Prioridad"}),e.jsxs("select",{value:c.prioridad,onChange:e=>d({...c,prioridad:e.target.value}),className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"Alta",children:"Alta"}),e.jsx("option",{value:"Media",children:"Media"}),e.jsx("option",{value:"Baja",children:"Baja"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Afiliados"}),e.jsx("input",{type:"number",min:"0",value:c.afiliados||0,onChange:e=>d({...c,afiliados:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Voluntarios"}),e.jsx("input",{type:"number",min:"0",value:c.voluntarios||0,onChange:e=>d({...c,voluntarios:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Competencia (partidos rivales)"}),e.jsx("input",{type:"text",value:c.competencia||"",onChange:e=>d({...c,competencia:e.target.value}),placeholder:"Ej: Partido X, Partido Y",className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Analisis de Competencia"}),e.jsx("textarea",{value:c.notasCompetencia||"",onChange:e=>d({...c,notasCompetencia:e.target.value}),placeholder:"Fortalezas y debilidades de rivales...",rows:2,className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Notas Generales"}),e.jsx("textarea",{value:c.notas||"",onChange:e=>d({...c,notas:e.target.value}),placeholder:"Observaciones adicionales...",rows:2,className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(C,{type:"button",variant:"outline",onClick:a,children:"Cancelar"}),e.jsx(C,{type:"submit",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-4 h-4 mr-2 animate-spin"}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),t?"Actualizar":"Registrar Base"]})})]})]})]})})}):null},J=()=>{const[h,b]=O.useState(null),[f,g]=O.useState("electores"),[C,G]=O.useState(""),[J,F]=O.useState([-15,-70]),[z,Q]=O.useState(8),[_,$]=O.useState([]),[q,K]=O.useState(null),[X,W]=O.useState(!1),[ee,se]=O.useState(null),[re,ae]=O.useState(void 0),[oe,te]=O.useState(!1),ie=O.useMemo(()=>[...new Set(Y.map(e=>e.provincia))].map(e=>{const s=Y.filter(s=>s.provincia===e),r=B[e]||{lat:-15.5,lng:-70};return{nombre:e,electores:s.reduce((e,s)=>e+s.electores,0),varones:s.reduce((e,s)=>e+s.varones,0),mujeres:s.reduce((e,s)=>e+s.mujeres,0),jovenes:s.reduce((e,s)=>e+s.jovenes,0),mayores70:s.reduce((e,s)=>e+s.mayores70,0),distritos:s.length,lat:r.lat,lng:r.lng,distritosData:s}}).sort((e,s)=>s.electores-e.electores),[]),ne=O.useMemo(()=>h?ie.find(e=>e.nombre===h):null,[h,ie]),le=O.useMemo(()=>{return h?(e=h,Y.filter(s=>s.provincia===e).sort((e,s)=>s.electores-e.electores)):[];var e},[h]),ce=O.useMemo(()=>C?ie.filter(e=>e.nombre.toLowerCase().includes(C.toLowerCase())):ie,[ie,C]),de=O.useMemo(()=>Math.max(...ie.map(e=>e.electores)),[ie]),me=async()=>{try{const[e,s]=await Promise.all([P(),w()]);e.success&&e.data&&$(e.data),s.success&&s.data&&K(s.data)}catch(e){console.error("Error cargando bases:",e)}};O.useEffect(()=>{me()},[]);const xe=()=>{switch(f){case"jovenes":return"#22c55e";case"mayores":return"#f97316";case"mujeres":return"#ec4899";default:return"#3b82f6"}},ve=e=>{const s=h===e;if(b(s?null:e),s)F([-15,-70]),Q(8);else{const s=B[e];s&&(F([s.lat,s.lng]),Q(10))}},je=()=>{switch(f){case"jovenes":return"bg-green-500";case"mayores":return"bg-orange-500";case"mujeres":return"bg-pink-500";default:return"bg-blue-500"}},pe=O.useMemo(()=>Math.max(...ie.map(e=>{switch(f){case"jovenes":return e.jovenes;case"mayores":return e.mayores70;case"mujeres":return e.mujeres;default:return e.electores}})),[ie,f]),ue=s=>{switch(s){case"Activa":return e.jsx(L,{variant:"success",children:"Activa"});case"En_Formacion":return e.jsx(L,{variant:"warning",children:"En Formacion"});case"Pendiente":return e.jsx(L,{variant:"info",children:"Pendiente"});default:return e.jsx(L,{variant:"default",children:"Inactiva"})}};return e.jsxs(U,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-secondary-900 flex items-center gap-2",children:[e.jsx(s,{className:"w-7 h-7 text-primary-600"}),"Mapa Electoral - Region Puno"]}),e.jsxs("p",{className:"text-secondary-600 mt-1",children:["Analisis territorial de ",k.electores.toLocaleString()," electores en ",k.provincias," provincias"]})]}),e.jsxs(L,{variant:"info",className:"text-lg px-4 py-2",children:[k.distritos," Distritos"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs(I,{className:"text-center",children:[e.jsx(a,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:k.varones.toLocaleString()}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Varones (49.5%)"})]})}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(I,{className:"text-center",children:[e.jsx(o,{className:"w-8 h-8 text-pink-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:k.mujeres.toLocaleString()}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Mujeres (50.5%)"})]})}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(I,{className:"text-center",children:[e.jsx(t,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:k.jovenes.toLocaleString()}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Jovenes (31.3%)"})]})}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs(I,{className:"text-center",children:[e.jsx(i,{className:"w-8 h-8 text-orange-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:k.mayores70.toLocaleString()}),e.jsx("p",{className:"text-sm text-secondary-500",children:"+70 anos (9.5%)"})]})})]}),q&&e.jsx(I,{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border-purple-200",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(n,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-secondary-900",children:"Bases Territoriales"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"Coordinadores registrados"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:q.totalBases}),e.jsx("p",{className:"text-xs text-secondary-500",children:"Total Bases"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:q.activas}),e.jsx("p",{className:"text-xs text-secondary-500",children:"Activas"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:q.enFormacion}),e.jsx("p",{className:"text-xs text-secondary-500",children:"En Formacion"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:q.totalAfiliados}),e.jsx("p",{className:"text-xs text-secondary-500",children:"Afiliados"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:q.totalVoluntarios}),e.jsx("p",{className:"text-xs text-secondary-500",children:"Voluntarios"})]})]})]})}),e.jsx(I,{children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(l,{className:"w-5 h-5 text-secondary-500"}),e.jsx("span",{className:"text-sm font-medium text-secondary-700 mr-2",children:"Visualizar:"}),[{key:"electores",label:"Total Electores",color:"bg-blue-500"},{key:"jovenes",label:"Jovenes",color:"bg-green-500"},{key:"mayores",label:"+70 anos",color:"bg-orange-500"},{key:"mujeres",label:"Mujeres",color:"bg-pink-500"}].map(s=>e.jsx("button",{onClick:()=>g(s.key),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(f===s.key?`${s.color} text-white`:"bg-secondary-100 text-secondary-700 hover:bg-secondary-200"),children:s.label},s.key))]})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(I,{className:"p-0 overflow-hidden",children:e.jsxs("div",{className:"h-[500px] relative",children:[e.jsxs(M,{center:J,zoom:z,style:{height:"100%",width:"100%"},zoomControl:!0,children:[e.jsx(Z,{center:J,zoom:z}),e.jsx(T,{attribution:'© <a href="https://carto.com/">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),ie.map(s=>{const r=B[s.nombre];if(!r)return null;const a=h===s.nombre;return e.jsx(H,{center:[r.lat,r.lng],radius:(o=s.electores,15+o/de*30),pathOptions:{fillColor:xe(),color:a?"#fbbf24":"rgba(255,255,255,0.8)",weight:a?3:2,fillOpacity:.85},eventHandlers:{click:()=>ve(s.nombre)},children:e.jsx(D,{children:e.jsxs("div",{className:"p-2 min-w-[200px]",children:[e.jsx("h3",{className:"font-bold text-lg text-yellow-600 border-b pb-2 mb-2",children:s.nombre}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Electores:"}),e.jsx("span",{className:"font-semibold text-blue-600",children:s.electores.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Varones:"}),e.jsx("span",{children:s.varones.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Mujeres:"}),e.jsx("span",{className:"text-pink-600",children:s.mujeres.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Jovenes:"}),e.jsx("span",{className:"text-green-600",children:s.jovenes.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Distritos:"}),e.jsx("span",{className:"font-semibold",children:s.distritos})]})]})]})})},s.nombre);var o})]}),e.jsxs("div",{className:"absolute bottom-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-lg z-[1000]",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Tamano: Poblacion"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${je()}`}),e.jsx("span",{className:"text-xs text-gray-600",children:"electores"===f?"Total Electores":"jovenes"===f?"Jovenes":"mayores"===f?"+70 anos":"Mujeres"})]})]})]})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(I,{className:"h-[500px] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"font-semibold text-secondary-900 flex items-center gap-2",children:[e.jsx(c,{className:"w-5 h-5"}),"Provincias"]}),e.jsx("span",{className:"text-sm text-secondary-500",children:ce.length})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-secondary-400"}),e.jsx("input",{type:"text",placeholder:"Buscar provincia...",value:C,onChange:e=>G(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-secondary-200 rounded-lg text-sm focus:ring-2 focus:ring-primary-500"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:ce.map((s,a)=>{const o=(e=>{switch(f){case"jovenes":return{value:e.jovenes,percent:(e.jovenes/e.electores*100).toFixed(1)};case"mayores":return{value:e.mayores70,percent:(e.mayores70/e.electores*100).toFixed(1)};case"mujeres":return{value:e.mujeres,percent:(e.mujeres/e.electores*100).toFixed(1)};default:return{value:e.electores,percent:(e.electores/k.electores*100).toFixed(1)}}})(s),t=h===s.nombre,i=o.value/pe*100;return e.jsxs(r.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.03*a},onClick:()=>ve(s.nombre),className:"w-full text-left p-3 rounded-lg border transition-all "+(t?"bg-primary-50 border-primary-500":"bg-white border-secondary-200 hover:border-primary-300"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold "+(a<3?"bg-yellow-400 text-yellow-900":"bg-secondary-200 text-secondary-600"),children:a+1}),e.jsx("span",{className:"font-medium text-secondary-900 text-sm",children:s.nombre})]}),e.jsx(m,{className:"w-4 h-4 text-secondary-400 transition-transform "+(t?"rotate-90":"")})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-secondary-600",children:[s.distritos," distritos"]}),e.jsxs("span",{className:"font-semibold text-primary-600",children:[o.value.toLocaleString()," (",o.percent,"%)"]})]}),e.jsx("div",{className:"mt-2 h-1.5 bg-secondary-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${je()} rounded-full transition-all duration-500`,style:{width:`${i}%`}})})]},s.nombre)})})]})})]}),ne&&e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsxs(I,{className:"bg-gradient-to-r from-primary-600 to-primary-700 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(x,{className:"w-6 h-6"}),ne.nombre]}),e.jsxs("p",{className:"text-primary-100 mt-1",children:[ne.distritos," distritos"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-3xl font-bold",children:ne.electores.toLocaleString()}),e.jsx("p",{className:"text-primary-100",children:"electores"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:ne.varones.toLocaleString()}),e.jsx("p",{className:"text-xs text-primary-200",children:"Varones"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:ne.mujeres.toLocaleString()}),e.jsx("p",{className:"text-xs text-primary-200",children:"Mujeres"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:ne.jovenes.toLocaleString()}),e.jsx("p",{className:"text-xs text-primary-200",children:"Jovenes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:ne.mayores70.toLocaleString()}),e.jsx("p",{className:"text-xs text-primary-200",children:"+70 anos"})]})]})]}),e.jsxs(I,{children:[e.jsxs("h3",{className:"font-semibold text-secondary-900 mb-4 flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-primary-600"}),"Distritos de ",ne.nombre,e.jsx("span",{className:"text-sm font-normal text-secondary-500 ml-2",children:"(Clic en + para registrar responsable)"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-secondary-200",children:[e.jsx("th",{className:"text-left py-2 px-3 font-semibold text-secondary-700",children:"#"}),e.jsx("th",{className:"text-left py-2 px-3 font-semibold text-secondary-700",children:"Distrito"}),e.jsx("th",{className:"text-right py-2 px-3 font-semibold text-secondary-700",children:"Electores"}),e.jsx("th",{className:"text-left py-2 px-3 font-semibold text-secondary-700",children:"Responsable"}),e.jsx("th",{className:"text-center py-2 px-3 font-semibold text-secondary-700",children:"Estado"}),e.jsx("th",{className:"text-center py-2 px-3 font-semibold text-secondary-700",children:"Prioridad"}),e.jsx("th",{className:"text-center py-2 px-3 font-semibold text-secondary-700",children:"Acciones"})]})}),e.jsx("tbody",{children:le.map((s,r)=>{const a=((e,s)=>_.find(r=>r.Provincia===e&&r.Distrito===s))(ne.nombre,s.distrito);return e.jsxs("tr",{className:"border-b border-secondary-100 hover:bg-secondary-50",children:[e.jsx("td",{className:"py-2 px-3 text-secondary-500",children:r+1}),e.jsx("td",{className:"py-2 px-3 font-medium text-secondary-900",children:s.distrito}),e.jsx("td",{className:"py-2 px-3 text-right font-semibold text-blue-600",children:s.electores.toLocaleString()}),e.jsx("td",{className:"py-2 px-3",children:a?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-secondary-900",children:a.Responsable}),e.jsxs("p",{className:"text-xs text-secondary-500 flex items-center gap-1",children:[e.jsx(p,{className:"w-3 h-3"}),a.Telefono]})]})]}):e.jsx("span",{className:"text-secondary-400 italic",children:"Sin asignar"})}),e.jsx("td",{className:"py-2 px-3 text-center",children:a?ue(a.Estado):e.jsx(L,{variant:"default",children:"-"})}),e.jsx("td",{className:"py-2 px-3 text-center",children:e.jsx(L,{variant:s.electores>=1e4?"danger":s.electores>=5e3?"warning":"success",children:s.electores>=1e4?"Alta":s.electores>=5e3?"Media":"Baja"})}),e.jsx("td",{className:"py-2 px-3 text-center",children:e.jsx("div",{className:"flex items-center justify-center gap-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>(e=>{se({provincia:e.Provincia,distrito:e.Distrito}),ae(e),W(!0)})(a),className:"p-1.5 hover:bg-blue-100 rounded-lg text-blue-600",title:"Editar",children:e.jsx(u,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>(async e=>{if(confirm("Eliminar esta base territorial?"))try{await S(e),await me()}catch(s){console.error("Error eliminando base:",s)}})(a.ID),className:"p-1.5 hover:bg-red-100 rounded-lg text-red-600",title:"Eliminar",children:e.jsx(A,{className:"w-4 h-4"})})]}):e.jsx("button",{onClick:()=>((e,s)=>{se({provincia:e,distrito:s}),ae(void 0),W(!0)})(ne.nombre,s.distrito),className:"p-1.5 hover:bg-green-100 rounded-lg text-green-600",title:"Agregar responsable",children:e.jsx(N,{className:"w-4 h-4"})})})})]},s.distrito)})})]})})]})]}),!ne&&e.jsxs(I,{className:"text-center py-12",children:[e.jsx(y,{className:"w-16 h-16 text-secondary-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-secondary-700 mb-2",children:"Selecciona una Provincia"}),e.jsx("p",{className:"text-secondary-500 max-w-md mx-auto",children:"Haz clic en un marcador del mapa o en una provincia de la lista para ver el detalle y registrar responsables."})]}),e.jsx(I,{children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("span",{className:"text-sm font-medium text-secondary-700",children:"Leyenda de Prioridad:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{variant:"danger",children:"Alta (+10,000)"}),e.jsx(L,{variant:"warning",children:"Media (5,000-10,000)"}),e.jsx(L,{variant:"success",children:"Baja (-5,000)"})]})]}),e.jsx("div",{className:"text-sm text-secondary-500",children:"Fuente: ONPE/JNE - Padron Electoral 2021"})]})})]}),ee&&e.jsx(V,{isOpen:X,onClose:()=>{W(!1),ae(void 0),se(null)},onSubmit:async e=>{te(!0);try{re?await R(re.ID,e):await E(e),await me(),W(!1),ae(void 0),se(null)}catch(s){console.error("Error guardando base:",s)}finally{te(!1)}},initialData:re,provincia:ee.provincia,distrito:ee.distrito,isLoading:oe})]})};export{J as default};
