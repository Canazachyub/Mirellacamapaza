import{j as e,a9 as s,z as a,b as t,ac as r,D as i,m as l,y as n,x as c,M as d,ae as o,E as m,ad as x,u as h,a as j}from"./ui-CW4SeC5O.js";import{r as p}from"./vendor-fM8kc8IR.js";import{u}from"./useQuery-FleDKwgl.js";import{d as N,u as g,I as v,B as b}from"./index-C9MSdL1c.js";import{u as f}from"./useMutation-CLlNb6S2.js";import{D as y}from"./DashboardLayout-CZopp9XZ.js";import{C as w}from"./Card-BAQzvENO.js";import{B as D}from"./Badge-Di74LEph.js";import{M as E}from"./Modal-BXTy6PvI.js";import{h as I,i as C,j as A}from"./api-Cz4wYYaF.js";import{a as S,f as z}from"./helpers-B5lfqhnz.js";import"./constants-CTD2yw_V.js";const F=()=>{const[F,P]=p.useState(""),[k,T]=p.useState(""),[L,V]=p.useState(null),[B,q]=p.useState(!1),M=N(),R=g(),{data:H,isLoading:K}=u({queryKey:["volunteers",{search:F,estado:k}],queryFn:()=>A({search:F,estado:k||void 0})}),O=f({mutationFn:({id:e,estado:s})=>C(e,{Estado:s}),onSuccess:()=>{R.success("Estado actualizado correctamente"),M.invalidateQueries({queryKey:["volunteers"]})},onError:()=>{R.error("Error al actualizar estado")}}),Q=f({mutationFn:I,onSuccess:()=>{R.success("Voluntario eliminado"),M.invalidateQueries({queryKey:["volunteers"]}),q(!1)},onError:()=>{R.error("Error al eliminar voluntario")}}),U=(e,s)=>{O.mutate({id:e,estado:s})},$=(null==H?void 0:H.data)||[],_={total:(null==H?void 0:H.total)||0,pending:(null==H?void 0:H.pending)||0,active:(null==H?void 0:H.active)||0};return e.jsxs(y,{title:"Voluntarios",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(w,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(s,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100",children:"Total Voluntarios"}),e.jsx("p",{className:"text-3xl font-bold",children:_.total})]})]})}),e.jsx(w,{className:"bg-gradient-to-r from-amber-500 to-amber-600 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(a,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-100",children:"Pendientes"}),e.jsx("p",{className:"text-3xl font-bold",children:_.pending})]})]})}),e.jsx(w,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(t,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100",children:"Activos"}),e.jsx("p",{className:"text-3xl font-bold",children:_.active})]})]})})]}),e.jsx(w,{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{placeholder:"Buscar voluntarios...",value:F,onChange:e=>P(e.target.value),leftIcon:e.jsx(r,{className:"w-5 h-5"}),className:"w-64"}),e.jsxs("select",{value:k,onChange:e=>T(e.target.value),className:"px-4 py-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"Activo",children:"Activo"}),e.jsx("option",{value:"Inactivo",children:"Inactivo"})]})]}),e.jsx(b,{variant:"outline",leftIcon:e.jsx(i,{className:"w-4 h-4"}),onClick:()=>{const e=(null==H?void 0:H.data)||[];if(0===e.length)return void R.error("No hay datos para exportar");const s=e.map(e=>[e.Nombre,e.DNI,e.Email,e.Telefono,e.Provincia,e.Distrito,e.Area,e.Disponibilidad,e.Estado,new Date(e.Fecha).toLocaleDateString()]),a=[["Nombre","DNI","Email","Teléfono","Provincia","Distrito","Área","Disponibilidad","Estado","Fecha"].join(","),...s.map(e=>e.join(","))].join("\n"),t=new Blob([a],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(t),r.download=`voluntarios_${(new Date).toISOString().split("T")[0]}.csv`,r.click(),R.success("Archivo exportado correctamente")},children:"Exportar CSV"})]})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:K?e.jsx("div",{className:"col-span-full py-12 text-center text-secondary-500",children:"Cargando voluntarios..."}):0===$.length?e.jsx("div",{className:"col-span-full py-12 text-center text-secondary-500",children:"No hay voluntarios registrados"}):$.map(s=>{return e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs(w,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xl font-bold text-primary-600",children:s.Nombre.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-secondary-900",children:s.Nombre}),e.jsx("p",{className:"text-sm text-secondary-500",children:s.DNI})]})]}),e.jsx(D,{className:S(s.Estado),children:s.Estado})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-secondary-600",children:[e.jsx(n,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:s.Email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-secondary-600",children:[e.jsx(c,{className:"w-4 h-4"}),e.jsx("span",{children:s.Telefono})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-secondary-600",children:[e.jsx(d,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.Distrito,", ",s.Provincia]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxs(D,{className:(r=s.Area,{"Redes Sociales":"bg-blue-100 text-blue-700","Logística":"bg-amber-100 text-amber-700",Comunicaciones:"bg-purple-100 text-purple-700",Eventos:"bg-green-100 text-green-700",Transporte:"bg-orange-100 text-orange-700"}[r]||"bg-secondary-100 text-secondary-700"),children:[e.jsx(o,{className:"w-3 h-3 mr-1"}),s.Area]}),e.jsxs(D,{variant:"outline",className:"text-secondary-600",children:[e.jsx(a,{className:"w-3 h-3 mr-1"}),s.Disponibilidad]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("span",{className:"text-xs text-secondary-400",children:z(s.Fecha)}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>(e=>{V(e),q(!0)})(s),className:"p-2 text-secondary-600 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"Ver detalles",children:e.jsx(m,{className:"w-4 h-4"})}),"Pendiente"===s.Estado&&e.jsx("button",{onClick:()=>U(s.ID,"Activo"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Activar",children:e.jsx(t,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Q.mutate(s.ID),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar",children:e.jsx(x,{className:"w-4 h-4"})})]})]})]})},s.ID);var r})}),e.jsx(E,{isOpen:B,onClose:()=>q(!1),title:"Detalles del Voluntario",size:"lg",children:L&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-3xl font-bold text-primary-600",children:L.Nombre.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-secondary-900",children:L.Nombre}),e.jsxs("p",{className:"text-secondary-600",children:["DNI: ",L.DNI]}),e.jsx(D,{className:S(L.Estado),size:"lg",children:L.Estado})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-secondary-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-secondary-600 mb-1",children:[e.jsx(n,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Email"})]}),e.jsx("p",{className:"font-medium",children:L.Email})]}),e.jsxs("div",{className:"p-4 bg-secondary-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-secondary-600 mb-1",children:[e.jsx(c,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Teléfono"})]}),e.jsx("p",{className:"font-medium",children:L.Telefono})]}),e.jsxs("div",{className:"p-4 bg-secondary-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-secondary-600 mb-1",children:[e.jsx(d,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Ubicación"})]}),e.jsxs("p",{className:"font-medium",children:[L.Distrito,", ",L.Provincia]})]}),e.jsxs("div",{className:"p-4 bg-secondary-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-secondary-600 mb-1",children:[e.jsx(h,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Fecha de registro"})]}),e.jsx("p",{className:"font-medium",children:new Date(L.Fecha).toLocaleDateString("es-PE",{year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-primary-50 rounded-lg border border-primary-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary-700 mb-1",children:[e.jsx(o,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Área de Interés"})]}),e.jsx("p",{className:"font-semibold text-primary-900",children:L.AreasInteres||L.Area||"No especificado"})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 mb-1",children:[e.jsx(a,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Disponibilidad"})]}),e.jsx("p",{className:"font-semibold text-blue-900",children:L.Disponibilidad})]})]}),L.Habilidades&&e.jsxs("div",{className:"p-4 bg-secondary-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-secondary-600 mb-2",children:"Habilidades"}),e.jsx("p",{className:"font-medium",children:L.Habilidades})]}),L.Experiencia&&e.jsxs("div",{className:"p-4 bg-secondary-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-secondary-600 mb-2",children:"Experiencia"}),e.jsx("p",{className:"font-medium whitespace-pre-wrap",children:L.Experiencia})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t",children:["Pendiente"===L.Estado&&e.jsxs(e.Fragment,{children:[e.jsx(b,{variant:"success",size:"sm",leftIcon:e.jsx(t,{className:"w-4 h-4"}),onClick:()=>{U(L.ID,"Activo"),q(!1)},children:"Activar"}),e.jsx(b,{variant:"danger",size:"sm",leftIcon:e.jsx(j,{className:"w-4 h-4"}),onClick:()=>{U(L.ID,"Inactivo"),q(!1)},children:"Rechazar"})]}),"Activo"===L.Estado&&e.jsx(b,{variant:"outline",size:"sm",onClick:()=>{U(L.ID,"Inactivo"),q(!1)},children:"Desactivar"}),e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>q(!1),children:"Cerrar"})]})]})})]})};export{F as default};
