import{j as e,au as s,D as a,m as t,i,U as n,a9 as l,V as r,u as d,M as c,av as o}from"./ui-CW4SeC5O.js";import{r as m}from"./vendor-fM8kc8IR.js";import{u as x}from"./useQuery-FleDKwgl.js";import{D as h}from"./DashboardLayout-CZopp9XZ.js";import{u as j,B as f}from"./index-C9MSdL1c.js";import{C as p}from"./Card-BAQzvENO.js";import{B as u}from"./Badge-Di74LEph.js";import{f as y,j as v,m as g,G as N}from"./api-Cz4wYYaF.js";import{f as b,A as w}from"./constants-CTD2yw_V.js";const E=()=>{const[E,A]=m.useState("month"),C=j(),{data:P,isLoading:R}=x({queryKey:["affiliates-report"],queryFn:()=>y({limit:1e3})}),{data:q,isLoading:L}=x({queryKey:["volunteers-report"],queryFn:()=>v({limit:1e3})}),{data:M,isLoading:z}=x({queryKey:["messages-report"],queryFn:()=>g({limit:1e3})}),{data:F,isLoading:V}=x({queryKey:["events-report"],queryFn:()=>N()}),O=R||L||z||V,S=(null==P?void 0:P.data)||[],D=(null==q?void 0:q.data)||[],I=(null==M?void 0:M.data)||[],B=(null==F?void 0:F.data)||[],K=b.reduce((e,s)=>(e[s]=S.filter(e=>e.Provincia===s).length,e),{}),T=Object.entries(K).sort((e,s)=>s[1]-e[1]).slice(0,5),k=w.reduce((e,s)=>(e[s]=D.filter(e=>e.Area===s).length,e),{}),U=Object.entries(k).sort((e,s)=>s[1]-e[1]).slice(0,5),$={total:I.length,nuevo:I.filter(e=>"Nuevo"===e.Estado).length,leido:I.filter(e=>"Leido"===e.Estado).length,respondido:I.filter(e=>"Respondido"===e.Estado).length},_={total:B.length,programado:B.filter(e=>"Programado"===e.Estado).length,enCurso:B.filter(e=>"EnCurso"===e.Estado).length,finalizado:B.filter(e=>"Finalizado"===e.Estado).length},G={affiliates:Math.floor(20*Math.random())+5,volunteers:Math.floor(15*Math.random())+3,messages:Math.floor(30*Math.random())+10};return e.jsxs(h,{title:"Reportes",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(s,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-secondary-900",children:"Análisis de Campaña"}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Estadísticas y métricas en tiempo real"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("select",{value:E,onChange:e=>A(e.target.value),className:"px-4 py-2 border border-secondary-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"week",children:"Esta semana"}),e.jsx("option",{value:"month",children:"Este mes"}),e.jsx("option",{value:"quarter",children:"Último trimestre"}),e.jsx("option",{value:"all",children:"Todo el tiempo"})]}),e.jsx(f,{variant:"primary",leftIcon:e.jsx(a,{className:"w-4 h-4"}),onClick:()=>{const e={fecha:(new Date).toISOString(),estadisticas:{afiliados:{total:S.length,verificados:S.filter(e=>"Verificado"===e.Estado).length,pendientes:S.filter(e=>"Pendiente"===e.Estado).length,porProvincia:K},voluntarios:{total:D.length,activos:D.filter(e=>"Activo"===e.Estado).length,porArea:k},mensajes:$,eventos:_}},s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download=`reporte_campana_${(new Date).toISOString().split("T")[0]}.json`,a.click(),C.success("Reporte exportado correctamente")},children:"Exportar Reporte"})]})]}),O?e.jsx("div",{className:"text-center py-12 text-secondary-500",children:"Cargando estadísticas..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsx(p,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Total Afiliados"}),e.jsx("p",{className:"text-3xl font-bold",children:S.length}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm",children:[e.jsx(i,{className:"w-4 h-4"}),e.jsxs("span",{children:["+",G.affiliates,"% este mes"]})]})]}),e.jsx(n,{className:"w-12 h-12 text-blue-200"})]})})}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(p,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm",children:"Total Voluntarios"}),e.jsx("p",{className:"text-3xl font-bold",children:D.length}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm",children:[e.jsx(i,{className:"w-4 h-4"}),e.jsxs("span",{children:["+",G.volunteers,"% este mes"]})]})]}),e.jsx(l,{className:"w-12 h-12 text-purple-200"})]})})}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(p,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Mensajes Recibidos"}),e.jsx("p",{className:"text-3xl font-bold",children:I.length}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm",children:[e.jsx(i,{className:"w-4 h-4"}),e.jsxs("span",{children:["+",G.messages,"% este mes"]})]})]}),e.jsx(r,{className:"w-12 h-12 text-green-200"})]})})}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(p,{className:"bg-gradient-to-br from-amber-500 to-amber-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-100 text-sm",children:"Eventos"}),e.jsx("p",{className:"text-3xl font-bold",children:B.length}),e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm",children:[e.jsx(d,{className:"w-4 h-4"}),e.jsxs("span",{children:[_.programado," programados"]})]})]}),e.jsx(d,{className:"w-12 h-12 text-amber-200"})]})})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(p,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900",children:"Afiliados por Provincia"}),e.jsx(c,{className:"w-5 h-5 text-secondary-400"})]}),e.jsx("div",{className:"space-y-4",children:T.map(([s,a],i)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-secondary-700",children:s}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:a})]}),e.jsx("div",{className:"h-2 bg-secondary-100 rounded-full overflow-hidden",children:e.jsx(t.div,{initial:{width:0},animate:{width:a/(T[0][1]||1)*100+"%"},transition:{duration:.5,delay:.1*i},className:"h-full bg-primary-500 rounded-full"})})]},s))})]}),e.jsxs(p,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-secondary-900",children:"Voluntarios por Área"}),e.jsx(o,{className:"w-5 h-5 text-secondary-400"})]}),e.jsx("div",{className:"space-y-4",children:U.map(([s,a],i)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-secondary-700",children:s}),e.jsx("span",{className:"text-sm font-medium text-secondary-900",children:a})]}),e.jsx("div",{className:"h-2 bg-secondary-100 rounded-full overflow-hidden",children:e.jsx(t.div,{initial:{width:0},animate:{width:a/(U[0][1]||1)*100+"%"},transition:{duration:.5,delay:.1*i},className:`h-full ${["bg-blue-500","bg-purple-500","bg-green-500","bg-amber-500","bg-red-500"][i]} rounded-full`})})]},s))})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(p,{children:[e.jsx("h4",{className:"font-semibold text-secondary-900 mb-4",children:"Estado de Afiliados"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Verificados"}),e.jsx(u,{variant:"success",children:S.filter(e=>"Verificado"===e.Estado).length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Pendientes"}),e.jsx(u,{variant:"warning",children:S.filter(e=>"Pendiente"===e.Estado).length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Rechazados"}),e.jsx(u,{variant:"danger",children:S.filter(e=>"Rechazado"===e.Estado).length})]})]})]}),e.jsxs(p,{children:[e.jsx("h4",{className:"font-semibold text-secondary-900 mb-4",children:"Estado de Voluntarios"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Activos"}),e.jsx(u,{variant:"success",children:D.filter(e=>"Activo"===e.Estado).length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Pendientes"}),e.jsx(u,{variant:"warning",children:D.filter(e=>"Pendiente"===e.Estado).length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Inactivos"}),e.jsx(u,{variant:"default",children:D.filter(e=>"Inactivo"===e.Estado).length})]})]})]}),e.jsxs(p,{children:[e.jsx("h4",{className:"font-semibold text-secondary-900 mb-4",children:"Estado de Mensajes"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Nuevos"}),e.jsx(u,{variant:"info",children:$.nuevo})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Leídos"}),e.jsx(u,{variant:"default",children:$.leido})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Respondidos"}),e.jsx(u,{variant:"success",children:$.respondido})]})]})]}),e.jsxs(p,{children:[e.jsx("h4",{className:"font-semibold text-secondary-900 mb-4",children:"Estado de Eventos"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Programados"}),e.jsx(u,{variant:"info",children:_.programado})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"En Curso"}),e.jsx(u,{variant:"warning",children:_.enCurso})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-secondary-600",children:"Finalizados"}),e.jsx(u,{variant:"success",children:_.finalizado})]})]})]})]})]})]})};export{E as default};
