import{j as e,aL as s,m as a,U as t,aM as r,i as l,a9 as n,a0 as i,aH as o,au as c,ac as d,l as x,M as m,a1 as p,aN as u,x as h,aO as j,ad as y,ap as b,E as f,c as v,X as N,L as g,b as w}from"./ui-CW4SeC5O.js";import{r as C}from"./vendor-fM8kc8IR.js";import{B as S}from"./index-C9MSdL1c.js";import{D as E}from"./DashboardLayout-CZopp9XZ.js";import{C as k}from"./Card-BAQzvENO.js";import{B as P}from"./Badge-Di74LEph.js";import{g as L,a as M,R as B,T as A,P as T}from"./electoralData-CQ0jCilg.js";import{N as F,O as D,P as R,Q as z,R as V}from"./api-Cz4wYYaF.js";import{M as I,T as O,C as J,P as _,u as $}from"./maps-DbECud_u.js";import"./constants-CTD2yw_V.js";const H=({center:e,zoom:s})=>{const a=$();return C.useEffect(()=>{a.setView(e,s)},[e,s,a]),null},q=({isOpen:s,onClose:t,onSubmit:r,initialData:l,provincia:n,distrito:i,isLoading:o})=>{const[c,d]=C.useState({provincia:n,distrito:i,tipoBase:(null==l?void 0:l.TipoBase)||"Punto_Contacto",responsable:(null==l?void 0:l.Responsable)||"",telefono:(null==l?void 0:l.Telefono)||"",estado:(null==l?void 0:l.Estado)||"Pendiente",afiliados:(null==l?void 0:l.Afiliados)||0,voluntarios:(null==l?void 0:l.Voluntarios)||0,competencia:(null==l?void 0:l.Competencia)||"",notasCompetencia:(null==l?void 0:l.NotasCompetencia)||"",prioridad:(null==l?void 0:l.Prioridad)||"Media",notas:(null==l?void 0:l.Notas)||""});C.useEffect(()=>{d({provincia:n,distrito:i,tipoBase:(null==l?void 0:l.TipoBase)||"Punto_Contacto",responsable:(null==l?void 0:l.Responsable)||"",telefono:(null==l?void 0:l.Telefono)||"",estado:(null==l?void 0:l.Estado)||"Pendiente",afiliados:(null==l?void 0:l.Afiliados)||0,voluntarios:(null==l?void 0:l.Voluntarios)||0,competencia:(null==l?void 0:l.Competencia)||"",notasCompetencia:(null==l?void 0:l.NotasCompetencia)||"",prioridad:(null==l?void 0:l.Prioridad)||"Media",notas:(null==l?void 0:l.Notas)||""})},[n,i,l]);return s?e.jsx(v,{children:e.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center p-4",children:e.jsxs(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-secondary-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-secondary-900",children:l?"Editar Base":"Registrar Base Territorial"}),e.jsxs("p",{className:"text-sm text-secondary-600",children:[i,", ",n]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-secondary-100 rounded-lg",children:e.jsx(N,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),await r(c)},className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Tipo de Base"}),e.jsxs("select",{value:c.tipoBase,onChange:e=>d({...c,tipoBase:e.target.value}),className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"Sede",children:"Sede Principal"}),e.jsx("option",{value:"Punto_Contacto",children:"Punto de Contacto"}),e.jsx("option",{value:"Comunidad",children:"Comunidad"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Responsable *"}),e.jsx("input",{type:"text",required:!0,value:c.responsable,onChange:e=>d({...c,responsable:e.target.value}),placeholder:"Nombre del coordinador",className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Telefono *"}),e.jsx("input",{type:"tel",required:!0,value:c.telefono,onChange:e=>d({...c,telefono:e.target.value}),placeholder:"987654321",className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Estado"}),e.jsxs("select",{value:c.estado,onChange:e=>d({...c,estado:e.target.value}),className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"Activa",children:"Activa"}),e.jsx("option",{value:"En_Formacion",children:"En Formacion"}),e.jsx("option",{value:"Pendiente",children:"Pendiente"}),e.jsx("option",{value:"Inactiva",children:"Inactiva"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Prioridad"}),e.jsxs("select",{value:c.prioridad,onChange:e=>d({...c,prioridad:e.target.value}),className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"Alta",children:"Alta"}),e.jsx("option",{value:"Media",children:"Media"}),e.jsx("option",{value:"Baja",children:"Baja"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Afiliados"}),e.jsx("input",{type:"number",min:"0",value:c.afiliados||0,onChange:e=>d({...c,afiliados:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Voluntarios"}),e.jsx("input",{type:"number",min:"0",value:c.voluntarios||0,onChange:e=>d({...c,voluntarios:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Competencia (partidos rivales)"}),e.jsx("input",{type:"text",value:c.competencia||"",onChange:e=>d({...c,competencia:e.target.value}),placeholder:"Ej: Partido X, Partido Y",className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Analisis de Competencia"}),e.jsx("textarea",{value:c.notasCompetencia||"",onChange:e=>d({...c,notasCompetencia:e.target.value}),placeholder:"Fortalezas y debilidades de rivales...",rows:2,className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Notas Generales"}),e.jsx("textarea",{value:c.notas||"",onChange:e=>d({...c,notas:e.target.value}),placeholder:"Observaciones adicionales...",rows:2,className:"w-full px-3 py-2 border border-secondary-200 rounded-lg focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(S,{type:"button",variant:"outline",onClick:t,children:"Cancelar"}),e.jsx(S,{type:"submit",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4 mr-2 animate-spin"}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),l?"Actualizar":"Registrar Base"]})})]})]})]})})}):null},G=()=>{const[v,N]=C.useState(null),[g,w]=C.useState("electores"),[S,$]=C.useState(""),[G,Q]=C.useState([-15,-70]),[U,X]=C.useState(8),[Y,K]=C.useState([]),[W,Z]=C.useState(null),[ee,se]=C.useState(!1),[ae,te]=C.useState(null),[re,le]=C.useState(void 0),[ne,ie]=C.useState(!1),oe=C.useMemo(()=>L(),[]),ce=C.useMemo(()=>v?oe.find(e=>e.nombre===v):null,[v,oe]),de=C.useMemo(()=>v?M(v):[],[v]),xe=C.useMemo(()=>S?oe.filter(e=>e.nombre.toLowerCase().includes(S.toLowerCase())):oe,[oe,S]),me=C.useMemo(()=>Math.max(...oe.map(e=>e.electores)),[oe]),pe=async()=>{try{const[e,s]=await Promise.all([F(),D()]);e.success&&e.data&&K(e.data),s.success&&s.data&&Z(s.data)}catch(e){console.error("Error cargando bases:",e)}};C.useEffect(()=>{pe()},[]);const ue=()=>{switch(g){case"jovenes":return"#22c55e";case"mayores":return"#f97316";case"mujeres":return"#ec4899";default:return"#3b82f6"}},he=e=>{const s=v===e;if(N(s?null:e),s)Q([-15,-70]),X(8);else{const s=T[e];s&&(Q([s.lat,s.lng]),X(10))}},je=()=>{switch(g){case"jovenes":return"bg-green-500";case"mayores":return"bg-orange-500";case"mujeres":return"bg-pink-500";default:return"bg-blue-500"}},ye=C.useMemo(()=>Math.max(...oe.map(e=>{switch(g){case"jovenes":return e.jovenes;case"mayores":return e.mayores70;case"mujeres":return e.mujeres;default:return e.electores}})),[oe,g]),be=s=>{switch(s){case"Activa":return e.jsx(P,{variant:"success",children:"Activa"});case"En_Formacion":return e.jsx(P,{variant:"warning",children:"En Formacion"});case"Pendiente":return e.jsx(P,{variant:"info",children:"Pendiente"});default:return e.jsx(P,{variant:"default",children:"Inactiva"})}};return e.jsxs(E,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-secondary-900 flex items-center gap-2",children:[e.jsx(s,{className:"w-7 h-7 text-primary-600"}),"Mapa Electoral - Region Puno"]}),e.jsxs("p",{className:"text-secondary-600 mt-1",children:["Poblacion Electoral 2026: ",e.jsx("strong",{children:A.toLocaleString()})," electores en ",B.provincias," provincias (Fuente: RENIEC)"]})]}),e.jsxs(P,{variant:"info",className:"text-lg px-4 py-2",children:[B.distritos," Distritos"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs(k,{className:"text-center",children:[e.jsx(t,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:B.varones.toLocaleString()}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Varones (49.5%)"})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(k,{className:"text-center",children:[e.jsx(r,{className:"w-8 h-8 text-pink-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:B.mujeres.toLocaleString()}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Mujeres (50.5%)"})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(k,{className:"text-center",children:[e.jsx(l,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:B.jovenes.toLocaleString()}),e.jsx("p",{className:"text-sm text-secondary-500",children:"Jovenes (31.3%)"})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs(k,{className:"text-center",children:[e.jsx(n,{className:"w-8 h-8 text-orange-500 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-secondary-900",children:B.mayores70.toLocaleString()}),e.jsx("p",{className:"text-sm text-secondary-500",children:"+70 anos (9.5%)"})]})})]}),W&&e.jsx(k,{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border-purple-200",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-secondary-900",children:"Bases Territoriales"}),e.jsx("p",{className:"text-sm text-secondary-600",children:"Coordinadores registrados"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:W.totalBases}),e.jsx("p",{className:"text-xs text-secondary-500",children:"Total Bases"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:W.activas}),e.jsx("p",{className:"text-xs text-secondary-500",children:"Activas"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:W.enFormacion}),e.jsx("p",{className:"text-xs text-secondary-500",children:"En Formacion"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:W.totalAfiliados}),e.jsx("p",{className:"text-xs text-secondary-500",children:"Afiliados"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:W.totalVoluntarios}),e.jsx("p",{className:"text-xs text-secondary-500",children:"Voluntarios"})]})]})]})}),e.jsx(k,{children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5 text-secondary-500"}),e.jsx("span",{className:"text-sm font-medium text-secondary-700 mr-2",children:"Visualizar:"}),[{key:"electores",label:"Total Electores",color:"bg-blue-500"},{key:"jovenes",label:"Jovenes",color:"bg-green-500"},{key:"mayores",label:"+70 anos",color:"bg-orange-500"},{key:"mujeres",label:"Mujeres",color:"bg-pink-500"}].map(s=>e.jsx("button",{onClick:()=>w(s.key),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(g===s.key?`${s.color} text-white`:"bg-secondary-100 text-secondary-700 hover:bg-secondary-200"),children:s.label},s.key))]})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(k,{className:"p-0 overflow-hidden",children:e.jsxs("div",{className:"h-[500px] relative",children:[e.jsxs(I,{center:G,zoom:U,style:{height:"100%",width:"100%"},zoomControl:!0,children:[e.jsx(H,{center:G,zoom:U}),e.jsx(O,{attribution:'Â© <a href="https://carto.com/">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),oe.map(s=>{const a=T[s.nombre];if(!a)return null;const t=v===s.nombre;return e.jsx(J,{center:[a.lat,a.lng],radius:(r=s.electores,15+r/me*30),pathOptions:{fillColor:ue(),color:t?"#fbbf24":"rgba(255,255,255,0.8)",weight:t?3:2,fillOpacity:.85},eventHandlers:{click:()=>he(s.nombre)},children:e.jsx(_,{children:e.jsxs("div",{className:"p-2 min-w-[200px]",children:[e.jsx("h3",{className:"font-bold text-lg text-yellow-600 border-b pb-2 mb-2",children:s.nombre}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Electores:"}),e.jsx("span",{className:"font-semibold text-blue-600",children:s.electores.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Varones:"}),e.jsx("span",{children:s.varones.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Mujeres:"}),e.jsx("span",{className:"text-pink-600",children:s.mujeres.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Jovenes:"}),e.jsx("span",{className:"text-green-600",children:s.jovenes.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t mt-2",children:[e.jsx("span",{className:"text-gray-600",children:"Distritos:"}),e.jsx("span",{className:"font-semibold",children:s.distritos})]})]})]})})},s.nombre);var r})]}),e.jsxs("div",{className:"absolute bottom-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg p-3 shadow-lg z-[1000]",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Tamano: Poblacion"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${je()}`}),e.jsx("span",{className:"text-xs text-gray-600",children:"electores"===g?"Total Electores":"jovenes"===g?"Jovenes":"mayores"===g?"+70 anos":"Mujeres"})]})]})]})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(k,{className:"h-[500px] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"font-semibold text-secondary-900 flex items-center gap-2",children:[e.jsx(c,{className:"w-5 h-5"}),"Provincias"]}),e.jsx("span",{className:"text-sm text-secondary-500",children:xe.length})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-secondary-400"}),e.jsx("input",{type:"text",placeholder:"Buscar provincia...",value:S,onChange:e=>$(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-secondary-200 rounded-lg text-sm focus:ring-2 focus:ring-primary-500"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:xe.map((s,t)=>{const r=(e=>{switch(g){case"jovenes":return{value:e.jovenes,percent:(e.jovenes/e.electores*100).toFixed(1)};case"mayores":return{value:e.mayores70,percent:(e.mayores70/e.electores*100).toFixed(1)};case"mujeres":return{value:e.mujeres,percent:(e.mujeres/e.electores*100).toFixed(1)};default:return{value:e.electores,percent:(e.electores/B.electores*100).toFixed(1)}}})(s),l=v===s.nombre,n=r.value/ye*100;return e.jsxs(a.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.03*t},onClick:()=>he(s.nombre),className:"w-full text-left p-3 rounded-lg border transition-all "+(l?"bg-primary-50 border-primary-500":"bg-white border-secondary-200 hover:border-primary-300"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold "+(t<3?"bg-yellow-400 text-yellow-900":"bg-secondary-200 text-secondary-600"),children:t+1}),e.jsx("span",{className:"font-medium text-secondary-900 text-sm",children:s.nombre})]}),e.jsx(x,{className:"w-4 h-4 text-secondary-400 transition-transform "+(l?"rotate-90":"")})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-secondary-600",children:[s.distritos," distritos"]}),e.jsxs("span",{className:"font-semibold text-primary-600",children:[r.value.toLocaleString()," (",r.percent,"%)"]})]}),e.jsx("div",{className:"mt-2 h-1.5 bg-secondary-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${je()} rounded-full transition-all duration-500`,style:{width:`${n}%`}})})]},s.nombre)})})]})})]}),ce&&e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsxs(k,{className:"bg-gradient-to-r from-primary-600 to-primary-700 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(m,{className:"w-6 h-6"}),ce.nombre]}),e.jsxs("p",{className:"text-primary-100 mt-1",children:[ce.distritos," distritos"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-3xl font-bold",children:ce.electores.toLocaleString()}),e.jsx("p",{className:"text-primary-100",children:"electores"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:ce.varones.toLocaleString()}),e.jsx("p",{className:"text-xs text-primary-200",children:"Varones"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:ce.mujeres.toLocaleString()}),e.jsx("p",{className:"text-xs text-primary-200",children:"Mujeres"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:ce.jovenes.toLocaleString()}),e.jsx("p",{className:"text-xs text-primary-200",children:"Jovenes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:ce.mayores70.toLocaleString()}),e.jsx("p",{className:"text-xs text-primary-200",children:"+70 anos"})]})]})]}),e.jsxs(k,{children:[e.jsxs("h3",{className:"font-semibold text-secondary-900 mb-4 flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5 text-primary-600"}),"Distritos de ",ce.nombre,e.jsx("span",{className:"text-sm font-normal text-secondary-500 ml-2",children:"(Clic en + para registrar responsable)"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-secondary-200",children:[e.jsx("th",{className:"text-left py-2 px-3 font-semibold text-secondary-700",children:"#"}),e.jsx("th",{className:"text-left py-2 px-3 font-semibold text-secondary-700",children:"Distrito"}),e.jsx("th",{className:"text-right py-2 px-3 font-semibold text-secondary-700",children:"Electores"}),e.jsx("th",{className:"text-left py-2 px-3 font-semibold text-secondary-700",children:"Responsable"}),e.jsx("th",{className:"text-center py-2 px-3 font-semibold text-secondary-700",children:"Estado"}),e.jsx("th",{className:"text-center py-2 px-3 font-semibold text-secondary-700",children:"Prioridad"}),e.jsx("th",{className:"text-center py-2 px-3 font-semibold text-secondary-700",children:"Acciones"})]})}),e.jsx("tbody",{children:de.map((s,a)=>{const t=((e,s)=>Y.find(a=>a.Provincia===e&&a.Distrito===s))(ce.nombre,s.distrito);return e.jsxs("tr",{className:"border-b border-secondary-100 hover:bg-secondary-50",children:[e.jsx("td",{className:"py-2 px-3 text-secondary-500",children:a+1}),e.jsx("td",{className:"py-2 px-3 font-medium text-secondary-900",children:s.distrito}),e.jsx("td",{className:"py-2 px-3 text-right font-semibold text-blue-600",children:s.electores.toLocaleString()}),e.jsx("td",{className:"py-2 px-3",children:t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-secondary-900",children:t.Responsable}),e.jsxs("p",{className:"text-xs text-secondary-500 flex items-center gap-1",children:[e.jsx(h,{className:"w-3 h-3"}),t.Telefono]})]})]}):e.jsx("span",{className:"text-secondary-400 italic",children:"Sin asignar"})}),e.jsx("td",{className:"py-2 px-3 text-center",children:t?be(t.Estado):e.jsx(P,{variant:"default",children:"-"})}),e.jsx("td",{className:"py-2 px-3 text-center",children:e.jsx(P,{variant:s.electores>=1e4?"danger":s.electores>=5e3?"warning":"success",children:s.electores>=1e4?"Alta":s.electores>=5e3?"Media":"Baja"})}),e.jsx("td",{className:"py-2 px-3 text-center",children:e.jsx("div",{className:"flex items-center justify-center gap-1",children:t?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>(e=>{te({provincia:e.Provincia,distrito:e.Distrito}),le(e),se(!0)})(t),className:"p-1.5 hover:bg-blue-100 rounded-lg text-blue-600",title:"Editar",children:e.jsx(j,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>(async e=>{if(confirm("Eliminar esta base territorial?"))try{await R(e),await pe()}catch(s){console.error("Error eliminando base:",s)}})(t.ID),className:"p-1.5 hover:bg-red-100 rounded-lg text-red-600",title:"Eliminar",children:e.jsx(y,{className:"w-4 h-4"})})]}):e.jsx("button",{onClick:()=>((e,s)=>{te({provincia:e,distrito:s}),le(void 0),se(!0)})(ce.nombre,s.distrito),className:"p-1.5 hover:bg-green-100 rounded-lg text-green-600",title:"Agregar responsable",children:e.jsx(b,{className:"w-4 h-4"})})})})]},s.distrito)})})]})})]})]}),!ce&&e.jsxs(k,{className:"text-center py-12",children:[e.jsx(f,{className:"w-16 h-16 text-secondary-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-secondary-700 mb-2",children:"Selecciona una Provincia"}),e.jsx("p",{className:"text-secondary-500 max-w-md mx-auto",children:"Haz clic en un marcador del mapa o en una provincia de la lista para ver el detalle y registrar responsables."})]}),e.jsx(k,{children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("span",{className:"text-sm font-medium text-secondary-700",children:"Leyenda de Prioridad:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{variant:"danger",children:"Alta (+10,000)"}),e.jsx(P,{variant:"warning",children:"Media (5,000-10,000)"}),e.jsx(P,{variant:"success",children:"Baja (-5,000)"})]})]}),e.jsxs("div",{className:"text-sm text-secondary-500",children:["Detalle distrital: ONPE/JNE 2021 | Totales provinciales 2026: RENIEC (",A.toLocaleString()," electores)"]})]})})]}),ae&&e.jsx(q,{isOpen:ee,onClose:()=>{se(!1),le(void 0),te(null)},onSubmit:async e=>{ie(!0);try{re?await z(re.ID,e):await V(e),await pe(),se(!1),le(void 0),te(null)}catch(s){console.error("Error guardando base:",s)}finally{ie(!1)}},initialData:re,provincia:ae.provincia,distrito:ae.distrito,isLoading:ne})]})};export{G as default};
